---
title: "geom_count"
output: 
  html_document:
    keep_md: true
    self_contained: true
always_allow_html: true
---

Counts the number of observations at each location, then maps the count to point area and then convert them with ggplotly.








```{.bg-light}
p <-    
 ggplot(mpg, aes(cty, hwy)) +
 geom_point()
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-9e51bf4ccd61fca6c371" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9e51bf4ccd61fca6c371">{"x":{"data":[{"x":[18,21,20,21,16,18,18,18,16,20,19,15,17,17,15,15,17,16,14,11,14,13,12,16,15,16,15,15,14,11,11,14,19,22,18,18,17,18,17,16,16,17,17,11,15,15,16,16,15,14,13,14,14,14,9,11,11,13,13,9,13,11,13,11,12,9,13,13,12,9,11,11,13,11,11,11,12,14,15,14,13,13,13,14,14,13,13,13,11,13,18,18,17,16,15,15,15,15,14,28,24,25,23,24,26,25,24,21,18,18,21,21,18,18,19,19,19,20,20,17,16,17,17,15,15,14,9,14,13,11,11,12,12,11,11,11,12,14,13,13,13,21,19,23,23,19,19,18,19,19,14,15,14,12,18,16,17,18,16,18,18,20,19,20,18,21,19,19,19,20,20,19,20,15,16,15,15,16,14,21,21,21,21,18,18,19,21,21,21,22,18,18,18,24,24,26,28,26,11,13,15,16,17,15,15,15,16,21,19,21,22,17,33,21,19,22,21,21,21,16,17,35,29,21,19,20,20,21,18,19,21,16,18,17],"y":[29,29,31,30,26,26,27,26,25,28,27,25,25,25,25,24,25,23,20,15,20,17,17,26,23,26,25,24,19,14,15,17,27,30,26,29,26,24,24,22,22,24,24,17,22,21,23,23,19,18,17,17,19,19,12,17,15,17,17,12,17,16,18,15,16,12,17,17,16,12,15,16,17,15,17,17,18,17,19,17,19,19,17,17,17,16,16,17,15,17,26,25,26,24,21,22,23,22,20,33,32,32,29,32,34,36,36,29,26,27,30,31,26,26,28,26,29,28,27,24,24,24,22,19,20,17,12,19,18,14,15,18,18,15,17,16,18,17,19,19,17,29,27,31,32,27,26,26,25,25,17,17,20,18,26,26,27,28,25,25,24,27,25,26,23,26,26,26,26,25,27,25,27,20,20,19,17,20,17,29,27,31,31,26,26,28,27,29,31,31,26,26,27,30,33,35,37,35,15,18,20,20,22,17,19,18,20,29,26,29,29,24,44,29,26,29,29,29,29,23,24,44,41,29,26,28,29,29,29,28,29,26,26,26],"text":["cty: 18<br />hwy: 29","cty: 21<br />hwy: 29","cty: 20<br />hwy: 31","cty: 21<br />hwy: 30","cty: 16<br />hwy: 26","cty: 18<br />hwy: 26","cty: 18<br />hwy: 27","cty: 18<br />hwy: 26","cty: 16<br />hwy: 25","cty: 20<br />hwy: 28","cty: 19<br />hwy: 27","cty: 15<br />hwy: 25","cty: 17<br />hwy: 25","cty: 17<br />hwy: 25","cty: 15<br />hwy: 25","cty: 15<br />hwy: 24","cty: 17<br />hwy: 25","cty: 16<br />hwy: 23","cty: 14<br />hwy: 20","cty: 11<br />hwy: 15","cty: 14<br />hwy: 20","cty: 13<br />hwy: 17","cty: 12<br />hwy: 17","cty: 16<br />hwy: 26","cty: 15<br />hwy: 23","cty: 16<br />hwy: 26","cty: 15<br />hwy: 25","cty: 15<br />hwy: 24","cty: 14<br />hwy: 19","cty: 11<br />hwy: 14","cty: 11<br />hwy: 15","cty: 14<br />hwy: 17","cty: 19<br />hwy: 27","cty: 22<br />hwy: 30","cty: 18<br />hwy: 26","cty: 18<br />hwy: 29","cty: 17<br />hwy: 26","cty: 18<br />hwy: 24","cty: 17<br />hwy: 24","cty: 16<br />hwy: 22","cty: 16<br />hwy: 22","cty: 17<br />hwy: 24","cty: 17<br />hwy: 24","cty: 11<br />hwy: 17","cty: 15<br />hwy: 22","cty: 15<br />hwy: 21","cty: 16<br />hwy: 23","cty: 16<br />hwy: 23","cty: 15<br />hwy: 19","cty: 14<br />hwy: 18","cty: 13<br />hwy: 17","cty: 14<br />hwy: 17","cty: 14<br />hwy: 19","cty: 14<br />hwy: 19","cty:  9<br />hwy: 12","cty: 11<br />hwy: 17","cty: 11<br />hwy: 15","cty: 13<br />hwy: 17","cty: 13<br />hwy: 17","cty:  9<br />hwy: 12","cty: 13<br />hwy: 17","cty: 11<br />hwy: 16","cty: 13<br />hwy: 18","cty: 11<br />hwy: 15","cty: 12<br />hwy: 16","cty:  9<br />hwy: 12","cty: 13<br />hwy: 17","cty: 13<br />hwy: 17","cty: 12<br />hwy: 16","cty:  9<br />hwy: 12","cty: 11<br />hwy: 15","cty: 11<br />hwy: 16","cty: 13<br />hwy: 17","cty: 11<br />hwy: 15","cty: 11<br />hwy: 17","cty: 11<br />hwy: 17","cty: 12<br />hwy: 18","cty: 14<br />hwy: 17","cty: 15<br />hwy: 19","cty: 14<br />hwy: 17","cty: 13<br />hwy: 19","cty: 13<br />hwy: 19","cty: 13<br />hwy: 17","cty: 14<br />hwy: 17","cty: 14<br />hwy: 17","cty: 13<br />hwy: 16","cty: 13<br />hwy: 16","cty: 13<br />hwy: 17","cty: 11<br />hwy: 15","cty: 13<br />hwy: 17","cty: 18<br />hwy: 26","cty: 18<br />hwy: 25","cty: 17<br />hwy: 26","cty: 16<br />hwy: 24","cty: 15<br />hwy: 21","cty: 15<br />hwy: 22","cty: 15<br />hwy: 23","cty: 15<br />hwy: 22","cty: 14<br />hwy: 20","cty: 28<br />hwy: 33","cty: 24<br />hwy: 32","cty: 25<br />hwy: 32","cty: 23<br />hwy: 29","cty: 24<br />hwy: 32","cty: 26<br />hwy: 34","cty: 25<br />hwy: 36","cty: 24<br />hwy: 36","cty: 21<br />hwy: 29","cty: 18<br />hwy: 26","cty: 18<br />hwy: 27","cty: 21<br />hwy: 30","cty: 21<br />hwy: 31","cty: 18<br />hwy: 26","cty: 18<br />hwy: 26","cty: 19<br />hwy: 28","cty: 19<br />hwy: 26","cty: 19<br />hwy: 29","cty: 20<br />hwy: 28","cty: 20<br />hwy: 27","cty: 17<br />hwy: 24","cty: 16<br />hwy: 24","cty: 17<br />hwy: 24","cty: 17<br />hwy: 22","cty: 15<br />hwy: 19","cty: 15<br />hwy: 20","cty: 14<br />hwy: 17","cty:  9<br />hwy: 12","cty: 14<br />hwy: 19","cty: 13<br />hwy: 18","cty: 11<br />hwy: 14","cty: 11<br />hwy: 15","cty: 12<br />hwy: 18","cty: 12<br />hwy: 18","cty: 11<br />hwy: 15","cty: 11<br />hwy: 17","cty: 11<br />hwy: 16","cty: 12<br />hwy: 18","cty: 14<br />hwy: 17","cty: 13<br />hwy: 19","cty: 13<br />hwy: 19","cty: 13<br />hwy: 17","cty: 21<br />hwy: 29","cty: 19<br />hwy: 27","cty: 23<br />hwy: 31","cty: 23<br />hwy: 32","cty: 19<br />hwy: 27","cty: 19<br />hwy: 26","cty: 18<br />hwy: 26","cty: 19<br />hwy: 25","cty: 19<br />hwy: 25","cty: 14<br />hwy: 17","cty: 15<br />hwy: 17","cty: 14<br />hwy: 20","cty: 12<br />hwy: 18","cty: 18<br />hwy: 26","cty: 16<br />hwy: 26","cty: 17<br />hwy: 27","cty: 18<br />hwy: 28","cty: 16<br />hwy: 25","cty: 18<br />hwy: 25","cty: 18<br />hwy: 24","cty: 20<br />hwy: 27","cty: 19<br />hwy: 25","cty: 20<br />hwy: 26","cty: 18<br />hwy: 23","cty: 21<br />hwy: 26","cty: 19<br />hwy: 26","cty: 19<br />hwy: 26","cty: 19<br />hwy: 26","cty: 20<br />hwy: 25","cty: 20<br />hwy: 27","cty: 19<br />hwy: 25","cty: 20<br />hwy: 27","cty: 15<br />hwy: 20","cty: 16<br />hwy: 20","cty: 15<br />hwy: 19","cty: 15<br />hwy: 17","cty: 16<br />hwy: 20","cty: 14<br />hwy: 17","cty: 21<br />hwy: 29","cty: 21<br />hwy: 27","cty: 21<br />hwy: 31","cty: 21<br />hwy: 31","cty: 18<br />hwy: 26","cty: 18<br />hwy: 26","cty: 19<br />hwy: 28","cty: 21<br />hwy: 27","cty: 21<br />hwy: 29","cty: 21<br />hwy: 31","cty: 22<br />hwy: 31","cty: 18<br />hwy: 26","cty: 18<br />hwy: 26","cty: 18<br />hwy: 27","cty: 24<br />hwy: 30","cty: 24<br />hwy: 33","cty: 26<br />hwy: 35","cty: 28<br />hwy: 37","cty: 26<br />hwy: 35","cty: 11<br />hwy: 15","cty: 13<br />hwy: 18","cty: 15<br />hwy: 20","cty: 16<br />hwy: 20","cty: 17<br />hwy: 22","cty: 15<br />hwy: 17","cty: 15<br />hwy: 19","cty: 15<br />hwy: 18","cty: 16<br />hwy: 20","cty: 21<br />hwy: 29","cty: 19<br />hwy: 26","cty: 21<br />hwy: 29","cty: 22<br />hwy: 29","cty: 17<br />hwy: 24","cty: 33<br />hwy: 44","cty: 21<br />hwy: 29","cty: 19<br />hwy: 26","cty: 22<br />hwy: 29","cty: 21<br />hwy: 29","cty: 21<br />hwy: 29","cty: 21<br />hwy: 29","cty: 16<br />hwy: 23","cty: 17<br />hwy: 24","cty: 35<br />hwy: 44","cty: 29<br />hwy: 41","cty: 21<br />hwy: 29","cty: 19<br />hwy: 26","cty: 20<br />hwy: 28","cty: 20<br />hwy: 29","cty: 21<br />hwy: 29","cty: 18<br />hwy: 29","cty: 19<br />hwy: 28","cty: 21<br />hwy: 29","cty: 16<br />hwy: 26","cty: 18<br />hwy: 26","cty: 17<br />hwy: 26"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[7.7,36.3],"tickmode":"array","ticktext":["10","15","20","25","30","35"],"tickvals":[10,15,20,25,30,35],"categoryorder":"array","categoryarray":["10","15","20","25","30","35"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cty","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[10.4,45.6],"tickmode":"array","ticktext":["20","30","40"],"tickvals":[20,30,40],"categoryorder":"array","categoryarray":["20","30","40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"hwy","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"378050a85e09":{"x":{},"y":{},"type":"scatter"}},"cur_data":"378050a85e09","visdat":{"378050a85e09":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```






```{.bg-light}
p <-    
 ggplot(mpg, aes(cty, hwy)) +
 geom_count()
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-7ab1835ea8f1e59dc3c5" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-7ab1835ea8f1e59dc3c5">{"x":{"data":[{"x":[9,11,11,11,11,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,18,18,18,18,18,18,18,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,22,22,22,23,23,23,24,24,24,24,25,25,26,26,28,28,29,33,35],"y":[12,14,15,16,17,16,17,18,16,17,18,19,17,18,19,20,17,18,19,20,21,22,23,24,25,20,22,23,24,25,26,22,24,25,26,27,23,24,25,26,27,28,29,25,26,27,28,29,25,26,27,28,29,31,26,27,29,30,31,29,30,31,29,31,32,30,32,33,36,32,36,34,35,33,37,41,44,44],"text":["n:  5<br />cty:  9<br />hwy: 12","n:  2<br />cty: 11<br />hwy: 14","n: 10<br />cty: 11<br />hwy: 15","n:  3<br />cty: 11<br />hwy: 16","n:  5<br />cty: 11<br />hwy: 17","n:  2<br />cty: 12<br />hwy: 16","n:  1<br />cty: 12<br />hwy: 17","n:  5<br />cty: 12<br />hwy: 18","n:  2<br />cty: 13<br />hwy: 16","n: 12<br />cty: 13<br />hwy: 17","n:  3<br />cty: 13<br />hwy: 18","n:  4<br />cty: 13<br />hwy: 19","n: 10<br />cty: 14<br />hwy: 17","n:  1<br />cty: 14<br />hwy: 18","n:  4<br />cty: 14<br />hwy: 19","n:  4<br />cty: 14<br />hwy: 20","n:  3<br />cty: 15<br />hwy: 17","n:  1<br />cty: 15<br />hwy: 18","n:  5<br />cty: 15<br />hwy: 19","n:  3<br />cty: 15<br />hwy: 20","n:  2<br />cty: 15<br />hwy: 21","n:  3<br />cty: 15<br />hwy: 22","n:  2<br />cty: 15<br />hwy: 23","n:  2<br />cty: 15<br />hwy: 24","n:  3<br />cty: 15<br />hwy: 25","n:  4<br />cty: 16<br />hwy: 20","n:  2<br />cty: 16<br />hwy: 22","n:  4<br />cty: 16<br />hwy: 23","n:  2<br />cty: 16<br />hwy: 24","n:  2<br />cty: 16<br />hwy: 25","n:  5<br />cty: 16<br />hwy: 26","n:  2<br />cty: 17<br />hwy: 22","n:  7<br />cty: 17<br />hwy: 24","n:  3<br />cty: 17<br />hwy: 25","n:  3<br />cty: 17<br />hwy: 26","n:  1<br />cty: 17<br />hwy: 27","n:  1<br />cty: 18<br />hwy: 23","n:  2<br />cty: 18<br />hwy: 24","n:  2<br />cty: 18<br />hwy: 25","n: 14<br />cty: 18<br />hwy: 26","n:  3<br />cty: 18<br />hwy: 27","n:  1<br />cty: 18<br />hwy: 28","n:  3<br />cty: 18<br />hwy: 29","n:  4<br />cty: 19<br />hwy: 25","n:  8<br />cty: 19<br />hwy: 26","n:  4<br />cty: 19<br />hwy: 27","n:  3<br />cty: 19<br />hwy: 28","n:  1<br />cty: 19<br />hwy: 29","n:  1<br />cty: 20<br />hwy: 25","n:  1<br />cty: 20<br />hwy: 26","n:  4<br />cty: 20<br />hwy: 27","n:  3<br />cty: 20<br />hwy: 28","n:  1<br />cty: 20<br />hwy: 29","n:  1<br />cty: 20<br />hwy: 31","n:  1<br />cty: 21<br />hwy: 26","n:  2<br />cty: 21<br />hwy: 27","n: 14<br />cty: 21<br />hwy: 29","n:  2<br />cty: 21<br />hwy: 30","n:  4<br />cty: 21<br />hwy: 31","n:  2<br />cty: 22<br />hwy: 29","n:  1<br />cty: 22<br />hwy: 30","n:  1<br />cty: 22<br />hwy: 31","n:  1<br />cty: 23<br />hwy: 29","n:  1<br />cty: 23<br />hwy: 31","n:  1<br />cty: 23<br />hwy: 32","n:  1<br />cty: 24<br />hwy: 30","n:  2<br />cty: 24<br />hwy: 32","n:  1<br />cty: 24<br />hwy: 33","n:  1<br />cty: 24<br />hwy: 36","n:  1<br />cty: 25<br />hwy: 32","n:  1<br />cty: 25<br />hwy: 36","n:  1<br />cty: 26<br />hwy: 34","n:  2<br />cty: 26<br />hwy: 35","n:  1<br />cty: 28<br />hwy: 33","n:  1<br />cty: 28<br />hwy: 37","n:  1<br />cty: 29<br />hwy: 41","n:  1<br />cty: 33<br />hwy: 44","n:  1<br />cty: 35<br />hwy: 44"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":[14.2620509522878,9.02078925567146,19.5033126489041,11.1917909343566,14.2620509522878,9.02078925567146,3.77952755905512,14.2620509522878,9.02078925567146,21.1628260347931,11.1917909343566,12.8576591133593,19.5033126489041,3.77952755905512,12.8576591133593,12.8576591133593,11.1917909343566,3.77952755905512,14.2620509522878,11.1917909343566,9.02078925567146,11.1917909343566,9.02078925567146,9.02078925567146,11.1917909343566,12.8576591133593,9.02078925567146,12.8576591133593,9.02078925567146,9.02078925567146,14.2620509522878,9.02078925567146,16.6179443241592,11.1917909343566,11.1917909343566,3.77952755905512,3.77952755905512,9.02078925567146,9.02078925567146,22.6771653543307,11.1917909343566,3.77952755905512,11.1917909343566,12.8576591133593,17.6466025645104,12.8576591133593,11.1917909343566,3.77952755905512,3.77952755905512,3.77952755905512,12.8576591133593,11.1917909343566,3.77952755905512,3.77952755905512,3.77952755905512,9.02078925567146,22.6771653543307,9.02078925567146,12.8576591133593,9.02078925567146,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512,9.02078925567146,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512,9.02078925567146,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512,3.77952755905512],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[7.7,36.3],"tickmode":"array","ticktext":["10","15","20","25","30","35"],"tickvals":[10,15,20,25,30,35],"categoryorder":"array","categoryarray":["10","15","20","25","30","35"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cty","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[10.4,45.6],"tickmode":"array","ticktext":["20","30","40"],"tickvals":[20,30,40],"categoryorder":"array","categoryarray":["20","30","40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"hwy","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"37801f605da2":{"x":{},"y":{},"type":"scatter"}},"cur_data":"37801f605da2","visdat":{"37801f605da2":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```






```{.bg-light}
p <-    
 ggplot(mpg, aes(cty, hwy)) +
 geom_count() +
 scale_size_area()
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-0831b34d6a54411821c4" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0831b34d6a54411821c4">{"x":{"data":[{"x":[9,11,11,11,11,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,18,18,18,18,18,18,18,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,22,22,22,23,23,23,24,24,24,24,25,25,26,26,28,28,29,33,35],"y":[12,14,15,16,17,16,17,18,16,17,18,19,17,18,19,20,17,18,19,20,21,22,23,24,25,20,22,23,24,25,26,22,24,25,26,27,23,24,25,26,27,28,29,25,26,27,28,29,25,26,27,28,29,31,26,27,29,30,31,29,30,31,29,31,32,30,32,33,36,32,36,34,35,33,37,41,44,44],"text":["n:  5<br />cty:  9<br />hwy: 12","n:  2<br />cty: 11<br />hwy: 14","n: 10<br />cty: 11<br />hwy: 15","n:  3<br />cty: 11<br />hwy: 16","n:  5<br />cty: 11<br />hwy: 17","n:  2<br />cty: 12<br />hwy: 16","n:  1<br />cty: 12<br />hwy: 17","n:  5<br />cty: 12<br />hwy: 18","n:  2<br />cty: 13<br />hwy: 16","n: 12<br />cty: 13<br />hwy: 17","n:  3<br />cty: 13<br />hwy: 18","n:  4<br />cty: 13<br />hwy: 19","n: 10<br />cty: 14<br />hwy: 17","n:  1<br />cty: 14<br />hwy: 18","n:  4<br />cty: 14<br />hwy: 19","n:  4<br />cty: 14<br />hwy: 20","n:  3<br />cty: 15<br />hwy: 17","n:  1<br />cty: 15<br />hwy: 18","n:  5<br />cty: 15<br />hwy: 19","n:  3<br />cty: 15<br />hwy: 20","n:  2<br />cty: 15<br />hwy: 21","n:  3<br />cty: 15<br />hwy: 22","n:  2<br />cty: 15<br />hwy: 23","n:  2<br />cty: 15<br />hwy: 24","n:  3<br />cty: 15<br />hwy: 25","n:  4<br />cty: 16<br />hwy: 20","n:  2<br />cty: 16<br />hwy: 22","n:  4<br />cty: 16<br />hwy: 23","n:  2<br />cty: 16<br />hwy: 24","n:  2<br />cty: 16<br />hwy: 25","n:  5<br />cty: 16<br />hwy: 26","n:  2<br />cty: 17<br />hwy: 22","n:  7<br />cty: 17<br />hwy: 24","n:  3<br />cty: 17<br />hwy: 25","n:  3<br />cty: 17<br />hwy: 26","n:  1<br />cty: 17<br />hwy: 27","n:  1<br />cty: 18<br />hwy: 23","n:  2<br />cty: 18<br />hwy: 24","n:  2<br />cty: 18<br />hwy: 25","n: 14<br />cty: 18<br />hwy: 26","n:  3<br />cty: 18<br />hwy: 27","n:  1<br />cty: 18<br />hwy: 28","n:  3<br />cty: 18<br />hwy: 29","n:  4<br />cty: 19<br />hwy: 25","n:  8<br />cty: 19<br />hwy: 26","n:  4<br />cty: 19<br />hwy: 27","n:  3<br />cty: 19<br />hwy: 28","n:  1<br />cty: 19<br />hwy: 29","n:  1<br />cty: 20<br />hwy: 25","n:  1<br />cty: 20<br />hwy: 26","n:  4<br />cty: 20<br />hwy: 27","n:  3<br />cty: 20<br />hwy: 28","n:  1<br />cty: 20<br />hwy: 29","n:  1<br />cty: 20<br />hwy: 31","n:  1<br />cty: 21<br />hwy: 26","n:  2<br />cty: 21<br />hwy: 27","n: 14<br />cty: 21<br />hwy: 29","n:  2<br />cty: 21<br />hwy: 30","n:  4<br />cty: 21<br />hwy: 31","n:  2<br />cty: 22<br />hwy: 29","n:  1<br />cty: 22<br />hwy: 30","n:  1<br />cty: 22<br />hwy: 31","n:  1<br />cty: 23<br />hwy: 29","n:  1<br />cty: 23<br />hwy: 31","n:  1<br />cty: 23<br />hwy: 32","n:  1<br />cty: 24<br />hwy: 30","n:  2<br />cty: 24<br />hwy: 32","n:  1<br />cty: 24<br />hwy: 33","n:  1<br />cty: 24<br />hwy: 36","n:  1<br />cty: 25<br />hwy: 32","n:  1<br />cty: 25<br />hwy: 36","n:  1<br />cty: 26<br />hwy: 34","n:  2<br />cty: 26<br />hwy: 35","n:  1<br />cty: 28<br />hwy: 33","n:  1<br />cty: 28<br />hwy: 37","n:  1<br />cty: 29<br />hwy: 41","n:  1<br />cty: 33<br />hwy: 44","n:  1<br />cty: 35<br />hwy: 44"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":[13.5521984050514,8.57116285249271,19.1657027843947,10.4974877454526,13.5521984050514,8.57116285249271,6.06072737565183,13.5521984050514,8.57116285249271,20.9949754909051,10.4974877454526,12.1214547513037,19.1657027843947,6.06072737565183,12.1214547513037,12.1214547513037,10.4974877454526,6.06072737565183,13.5521984050514,10.4974877454526,8.57116285249271,10.4974877454526,8.57116285249271,8.57116285249271,10.4974877454526,12.1214547513037,8.57116285249271,12.1214547513037,8.57116285249271,8.57116285249271,13.5521984050514,8.57116285249271,16.0351774001359,10.4974877454526,10.4974877454526,6.06072737565183,6.06072737565183,8.57116285249271,8.57116285249271,22.6771653543307,10.4974877454526,6.06072737565183,10.4974877454526,12.1214547513037,17.1423257049854,12.1214547513037,10.4974877454526,6.06072737565183,6.06072737565183,6.06072737565183,12.1214547513037,10.4974877454526,6.06072737565183,6.06072737565183,6.06072737565183,8.57116285249271,22.6771653543307,8.57116285249271,12.1214547513037,8.57116285249271,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183,8.57116285249271,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183,8.57116285249271,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183,6.06072737565183],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[7.7,36.3],"tickmode":"array","ticktext":["10","15","20","25","30","35"],"tickvals":[10,15,20,25,30,35],"categoryorder":"array","categoryarray":["10","15","20","25","30","35"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cty","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[10.4,45.6],"tickmode":"array","ticktext":["20","30","40"],"tickvals":[20,30,40],"categoryorder":"array","categoryarray":["20","30","40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"hwy","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"37801ce11a1b":{"x":{},"y":{},"type":"scatter"}},"cur_data":"37801ce11a1b","visdat":{"37801ce11a1b":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```






```{.bg-light}
d <- ggplot(diamonds, aes(x = cut, y = clarity))
p <-  d + geom_count(aes(size = after_stat(prop)))
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-02d7401ab1b77a52bcdd" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-02d7401ab1b77a52bcdd">{"x":{"data":[{"x":[1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5],"y":[1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8],"text":["cut: 1<br />clarity: 1<br />prop: 1","cut: 1<br />clarity: 2<br />prop: 1","cut: 1<br />clarity: 3<br />prop: 1","cut: 1<br />clarity: 4<br />prop: 1","cut: 1<br />clarity: 5<br />prop: 1","cut: 1<br />clarity: 6<br />prop: 1","cut: 1<br />clarity: 7<br />prop: 1","cut: 1<br />clarity: 8<br />prop: 1","cut: 2<br />clarity: 1<br />prop: 1","cut: 2<br />clarity: 2<br />prop: 1","cut: 2<br />clarity: 3<br />prop: 1","cut: 2<br />clarity: 4<br />prop: 1","cut: 2<br />clarity: 5<br />prop: 1","cut: 2<br />clarity: 6<br />prop: 1","cut: 2<br />clarity: 7<br />prop: 1","cut: 2<br />clarity: 8<br />prop: 1","cut: 3<br />clarity: 1<br />prop: 1","cut: 3<br />clarity: 2<br />prop: 1","cut: 3<br />clarity: 3<br />prop: 1","cut: 3<br />clarity: 4<br />prop: 1","cut: 3<br />clarity: 5<br />prop: 1","cut: 3<br />clarity: 6<br />prop: 1","cut: 3<br />clarity: 7<br />prop: 1","cut: 3<br />clarity: 8<br />prop: 1","cut: 4<br />clarity: 1<br />prop: 1","cut: 4<br />clarity: 2<br />prop: 1","cut: 4<br />clarity: 3<br />prop: 1","cut: 4<br />clarity: 4<br />prop: 1","cut: 4<br />clarity: 5<br />prop: 1","cut: 4<br />clarity: 6<br />prop: 1","cut: 4<br />clarity: 7<br />prop: 1","cut: 4<br />clarity: 8<br />prop: 1","cut: 5<br />clarity: 1<br />prop: 1","cut: 5<br />clarity: 2<br />prop: 1","cut: 5<br />clarity: 3<br />prop: 1","cut: 5<br />clarity: 4<br />prop: 1","cut: 5<br />clarity: 5<br />prop: 1","cut: 5<br />clarity: 6<br />prop: 1","cut: 5<br />clarity: 7<br />prop: 1","cut: 5<br />clarity: 8<br />prop: 1"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":17.1421753925017,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Fair","Good","Very Good","Premium","Ideal"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Fair","Good","Very Good","Premium","Ideal"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cut","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,8.6],"tickmode":"array","ticktext":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"tickvals":[1,2,3,4,5,6,7,8],"categoryorder":"array","categoryarray":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"clarity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"37805cfc7189":{"x":{},"y":{},"size":{},"type":"scatter"}},"cur_data":"37805cfc7189","visdat":{"37805cfc7189":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```






```{.bg-light}
d <- ggplot(diamonds, aes(x = cut, y = clarity))
p <-    
 d + geom_count(aes(size = after_stat(prop), group = 1)) +
  scale_size_area(max_size = 10)
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-2c535e42641635045def" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2c535e42641635045def">{"x":{"data":[{"x":[1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5],"y":[1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8],"text":["cut: 1<br />clarity: 1<br />prop: 0.0038932147","cut: 1<br />clarity: 2<br />prop: 0.0086392288","cut: 1<br />clarity: 3<br />prop: 0.0075639600","cut: 1<br />clarity: 4<br />prop: 0.0048387097","cut: 1<br />clarity: 5<br />prop: 0.0031516500","cut: 1<br />clarity: 6<br />prop: 0.0012791991","cut: 1<br />clarity: 7<br />prop: 0.0003151650","cut: 1<br />clarity: 8<br />prop: 0.0001668521","cut: 2<br />clarity: 1<br />prop: 0.0017797553","cut: 2<br />clarity: 2<br />prop: 0.0200407861","cut: 2<br />clarity: 3<br />prop: 0.0289210234","cut: 2<br />clarity: 4<br />prop: 0.0181312570","cut: 2<br />clarity: 5<br />prop: 0.0120133482","cut: 2<br />clarity: 6<br />prop: 0.0053021876","cut: 2<br />clarity: 7<br />prop: 0.0034482759","cut: 2<br />clarity: 8<br />prop: 0.0013162773","cut: 3<br />clarity: 1<br />prop: 0.0015572859","cut: 3<br />clarity: 2<br />prop: 0.0389321468","cut: 3<br />clarity: 3<br />prop: 0.0600667408","cut: 3<br />clarity: 4<br />prop: 0.0480348535","cut: 3<br />clarity: 5<br />prop: 0.0329069336","cut: 3<br />clarity: 6<br />prop: 0.0228958102","cut: 3<br />clarity: 7<br />prop: 0.0146273637","cut: 3<br />clarity: 8<br />prop: 0.0049684835","cut: 4<br />clarity: 1<br />prop: 0.0038005191","cut: 4<br />clarity: 2<br />prop: 0.0546718576","cut: 4<br />clarity: 3<br />prop: 0.0662773452","cut: 4<br />clarity: 4<br />prop: 0.0622358176","cut: 4<br />clarity: 5<br />prop: 0.0368743048","cut: 4<br />clarity: 6<br />prop: 0.0161290323","cut: 4<br />clarity: 7<br />prop: 0.0114200964","cut: 4<br />clarity: 8<br />prop: 0.0042639970","cut: 5<br />clarity: 1<br />prop: 0.0027067112","cut: 5<br />clarity: 2<br />prop: 0.0481646274","cut: 5<br />clarity: 3<br />prop: 0.0793845013","cut: 5<br />clarity: 4<br />prop: 0.0940118650","cut: 5<br />clarity: 5<br />prop: 0.0665368928","cut: 5<br />clarity: 6<br />prop: 0.0483129403","cut: 5<br />clarity: 7<br />prop: 0.0379495736","cut: 5<br />clarity: 8<br />prop: 0.0224694105"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":[7.69131075208581,11.4573365278656,10.7206419767665,8.57454264870155,6.92014463944479,4.40874780563511,2.18834187984502,1.59225259686419,5.20027520525161,17.450326539863,20.9629795334123,16.5981673316059,13.5107113032547,8.97581158828261,7.23847674117712,4.47218628596888,4.86441203374676,24.3220601687338,30.2108688984523,27.0162096378863,22.3609314298444,18.6519477394978,14.9083373919211,8.68876613817559,7.59919592314618,28.822264371911,31.7342862036371,30.7515054577551,23.6705365680794,15.6549014299464,13.1728900593773,8.04923541165918,6.41308710982844,27.0526793232708,34.7307404639515,37.7952755905512,31.796362552867,27.09429885453,24.013177576896,18.4774493750011],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Fair","Good","Very Good","Premium","Ideal"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Fair","Good","Very Good","Premium","Ideal"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cut","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,8.6],"tickmode":"array","ticktext":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"tickvals":[1,2,3,4,5,6,7,8],"categoryorder":"array","categoryarray":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"clarity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"37807e1046d1":{"x":{},"y":{},"size":{},"type":"scatter"}},"cur_data":"37807e1046d1","visdat":{"37807e1046d1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```






```{.bg-light}
d <- ggplot(diamonds, aes(x = cut, y = clarity))
p <-    
 d + geom_count(aes(size = after_stat(prop), group = cut)) +
  scale_size_area(max_size = 10)
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-986681d30c088f6f7bb5" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-986681d30c088f6f7bb5">{"x":{"data":[{"x":[1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5],"y":[1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8],"text":["cut: 1<br />clarity: 1<br />prop: 0.130434783<br />cut: Fair","cut: 1<br />clarity: 2<br />prop: 0.289440994<br />cut: Fair","cut: 1<br />clarity: 3<br />prop: 0.253416149<br />cut: Fair","cut: 1<br />clarity: 4<br />prop: 0.162111801<br />cut: Fair","cut: 1<br />clarity: 5<br />prop: 0.105590062<br />cut: Fair","cut: 1<br />clarity: 6<br />prop: 0.042857143<br />cut: Fair","cut: 1<br />clarity: 7<br />prop: 0.010559006<br />cut: Fair","cut: 1<br />clarity: 8<br />prop: 0.005590062<br />cut: Fair","cut: 2<br />clarity: 1<br />prop: 0.019567876<br />cut: Good","cut: 2<br />clarity: 2<br />prop: 0.220342438<br />cut: Good","cut: 2<br />clarity: 3<br />prop: 0.317977986<br />cut: Good","cut: 2<br />clarity: 4<br />prop: 0.199347737<br />cut: Good","cut: 2<br />clarity: 5<br />prop: 0.132083163<br />cut: Good","cut: 2<br />clarity: 6<br />prop: 0.058295964<br />cut: Good","cut: 2<br />clarity: 7<br />prop: 0.037912760<br />cut: Good","cut: 2<br />clarity: 8<br />prop: 0.014472075<br />cut: Good","cut: 3<br />clarity: 1<br />prop: 0.006952491<br />cut: Very Good","cut: 3<br />clarity: 2<br />prop: 0.173812283<br />cut: Very Good","cut: 3<br />clarity: 3<br />prop: 0.268167522<br />cut: Very Good","cut: 3<br />clarity: 4<br />prop: 0.214451250<br />cut: Very Good","cut: 3<br />clarity: 5<br />prop: 0.146912763<br />cut: Very Good","cut: 3<br />clarity: 6<br />prop: 0.102218176<br />cut: Very Good","cut: 3<br />clarity: 7<br />prop: 0.065303758<br />cut: Very Good","cut: 3<br />clarity: 8<br />prop: 0.022181758<br />cut: Very Good","cut: 4<br />clarity: 1<br />prop: 0.014864767<br />cut: Premium","cut: 4<br />clarity: 2<br />prop: 0.213835110<br />cut: Premium","cut: 4<br />clarity: 3<br />prop: 0.259227032<br />cut: Premium","cut: 4<br />clarity: 4<br />prop: 0.243419621<br />cut: Premium","cut: 4<br />clarity: 5<br />prop: 0.144224494<br />cut: Premium","cut: 4<br />clarity: 6<br />prop: 0.063084620<br />cut: Premium","cut: 4<br />clarity: 7<br />prop: 0.044666812<br />cut: Premium","cut: 4<br />clarity: 8<br />prop: 0.016677543<br />cut: Premium","cut: 5<br />clarity: 1<br />prop: 0.006774628<br />cut: Ideal","cut: 5<br />clarity: 2<br />prop: 0.120551251<br />cut: Ideal","cut: 5<br />clarity: 3<br />prop: 0.198691476<br />cut: Ideal","cut: 5<br />clarity: 4<br />prop: 0.235302306<br />cut: Ideal","cut: 5<br />clarity: 5<br />prop: 0.166535196<br />cut: Ideal","cut: 5<br />clarity: 6<br />prop: 0.120922463<br />cut: Ideal","cut: 5<br />clarity: 7<br />prop: 0.094983991<br />cut: Ideal","cut: 5<br />clarity: 8<br />prop: 0.056238690<br />cut: Ideal"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":[24.2067061665619,36.0594426257248,33.7408588228109,26.986483981743,21.7796307179137,13.8755624539734,6.88732396659755,5.01126426919936,9.37585395320001,31.4621258713729,37.7952755905512,29.9257225145996,24.3591831169319,16.1829701778458,13.0506363779315,8.06314354794218,5.58867965613788,27.9433982806894,34.7089981760822,31.0386826078375,25.690274941206,21.4290566168978,17.1280560345326,9.98244602153074,8.17180586093135,30.9940619115111,34.1255086214424,33.0686739851952,25.4541442824569,16.8345199349163,14.1654855699597,8.6557564482138,5.51672967475346,23.2715252807894,29.8764235168432,32.5126284494608,27.3521837206595,23.3073276485438,20.6568548118677,15.8948555563204],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Fair","Good","Very Good","Premium","Ideal"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Fair","Good","Very Good","Premium","Ideal"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cut","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,8.6],"tickmode":"array","ticktext":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"tickvals":[1,2,3,4,5,6,7,8],"categoryorder":"array","categoryarray":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"clarity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"378043f628b2":{"x":{},"y":{},"size":{},"type":"scatter"}},"cur_data":"378043f628b2","visdat":{"378043f628b2":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```






```{.bg-light}
d <- ggplot(diamonds, aes(x = cut, y = clarity))
p <-    
 d + geom_count(aes(size = after_stat(prop), group = clarity)) +
  scale_size_area(max_size = 10)
```


```r
plotly::ggplotly(p)
```

```{=html}
<div id="htmlwidget-8c6c598887e03cc8efa1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8c6c598887e03cc8efa1">{"x":{"data":[{"x":[1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5],"y":[1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8],"text":["cut: 1<br />clarity: 1<br />prop: 0.283400810<br />clarity: I1","cut: 1<br />clarity: 2<br />prop: 0.050685229<br />clarity: SI2","cut: 1<br />clarity: 3<br />prop: 0.031228473<br />clarity: SI1","cut: 1<br />clarity: 4<br />prop: 0.021292217<br />clarity: VS2","cut: 1<br />clarity: 5<br />prop: 0.020805287<br />clarity: VS1","cut: 1<br />clarity: 6<br />prop: 0.013620213<br />clarity: VVS2","cut: 1<br />clarity: 7<br />prop: 0.004651163<br />clarity: VVS1","cut: 1<br />clarity: 8<br />prop: 0.005027933<br />clarity: IF","cut: 2<br />clarity: 1<br />prop: 0.129554656<br />clarity: I1","cut: 2<br />clarity: 2<br />prop: 0.117576680<br />clarity: SI2","cut: 2<br />clarity: 3<br />prop: 0.119402985<br />clarity: SI1","cut: 2<br />clarity: 4<br />prop: 0.079784630<br />clarity: VS2","cut: 2<br />clarity: 5<br />prop: 0.079304859<br />clarity: VS1","cut: 2<br />clarity: 6<br />prop: 0.056454797<br />clarity: VVS2","cut: 2<br />clarity: 7<br />prop: 0.050889193<br />clarity: VVS1","cut: 2<br />clarity: 8<br />prop: 0.039664804<br />clarity: IF","cut: 3<br />clarity: 1<br />prop: 0.113360324<br />clarity: I1","cut: 3<br />clarity: 2<br />prop: 0.228409832<br />clarity: SI2","cut: 3<br />clarity: 3<br />prop: 0.247990815<br />clarity: SI1","cut: 3<br />clarity: 4<br />prop: 0.211372165<br />clarity: VS2","cut: 3<br />clarity: 5<br />prop: 0.217231673<br />clarity: VS1","cut: 3<br />clarity: 6<br />prop: 0.243782077<br />clarity: VVS2","cut: 3<br />clarity: 7<br />prop: 0.215868673<br />clarity: VVS1","cut: 3<br />clarity: 8<br />prop: 0.149720670<br />clarity: IF","cut: 4<br />clarity: 1<br />prop: 0.276653171<br />clarity: I1","cut: 4<br />clarity: 2<br />prop: 0.320752665<br />clarity: SI2","cut: 4<br />clarity: 3<br />prop: 0.273631841<br />clarity: SI1","cut: 4<br />clarity: 4<br />prop: 0.273861968<br />clarity: VS2","cut: 4<br />clarity: 5<br />prop: 0.243421858<br />clarity: VS1","cut: 4<br />clarity: 6<br />prop: 0.171733123<br />clarity: VVS2","cut: 4<br />clarity: 7<br />prop: 0.168536252<br />clarity: VVS1","cut: 4<br />clarity: 8<br />prop: 0.128491620<br />clarity: IF","cut: 5<br />clarity: 1<br />prop: 0.197031039<br />clarity: I1","cut: 5<br />clarity: 2<br />prop: 0.282575593<br />clarity: SI2","cut: 5<br />clarity: 3<br />prop: 0.327745886<br />clarity: SI1","cut: 5<br />clarity: 4<br />prop: 0.413689019<br />clarity: VS2","cut: 5<br />clarity: 5<br />prop: 0.439236324<br />clarity: VS1","cut: 5<br />clarity: 6<br />prop: 0.514409791<br />clarity: VVS2","cut: 5<br />clarity: 7<br />prop: 0.560054720<br />clarity: VVS1","cut: 5<br />clarity: 8<br />prop: 0.677094972<br />clarity: IF"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":[24.4519368426287,10.3407831434075,8.11686077017823,6.70228925694548,6.62520891273568,5.36049227683208,3.13251740010925,3.25692277580651,16.5325267671205,15.7497374796922,15.8715855421304,12.9739536147099,12.9348864232559,10.9134772090593,10.3615685240321,9.14777303620498,15.4647627250586,21.9517991109089,22.8733892173878,21.1172139480596,21.4079112395493,22.6784625053078,21.3406445843825,17.7727079138149,24.159088711523,26.0134442980714,24.0268057933599,24.0369070524855,22.661701165347,19.034424718632,18.8564262745125,16.4645598265569,20.3882544900783,24.4163108633242,26.2954947476119,29.5426683302117,30.4412054304592,32.9433177307736,34.3738322080037,37.7952755905512],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Fair","Good","Very Good","Premium","Ideal"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Fair","Good","Very Good","Premium","Ideal"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cut","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,8.6],"tickmode":"array","ticktext":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"tickvals":[1,2,3,4,5,6,7,8],"categoryorder":"array","categoryarray":["I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"clarity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"378058371701":{"x":{},"y":{},"size":{},"type":"scatter"}},"cur_data":"378058371701","visdat":{"378058371701":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```


